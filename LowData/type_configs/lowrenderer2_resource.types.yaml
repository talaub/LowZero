module: LowRenderer2
source_path: src
header_path: include
prefix: LowRenderer
namespace:
  - Low
  - Renderer
dll_macro: LOW_RENDERER2_API
types:
  Mesh:
    no_auto_serialize: true
    no_auto_deserialize: true
    reference_counted: true
    unique_id: true
    properties:
      resource:
        type: Low::Renderer::MeshResource
        handle: true
      state:
        type: MeshState
        enum: true
      geometry:
        type: Low::Renderer::MeshGeometry
        handle: true
      gpu:
        type: Low::Renderer::GpuMesh
        handle: true
      unloadable:
        type: bool
        description: Tracks if, once this mesh is loaded,
          it can be automatically unloaded by the ResourceManager
      submesh_count:
        type: uint32_t
    functions:
      make_from_resource_config:
        static: true
        return_type: Mesh
        return_handle: true
        parameters:
          - name: config
            type: MeshResourceConfig
      get_editor_image:
        return_type: EditorImage
        return_handle: true

  MeshGeometry:
    no_auto_serialize: true
    no_auto_deserialize: true
    properties:
      submesh_count:
        type: uint32_t
      submeshes:
        type: Low::Util::List<SubmeshGeometry>
      aabb:
        type: Low::Math::AABB
      bounding_sphere:
        type: Low::Math::Sphere

  SubmeshGeometry:
    skip_name_serialization: true
    skip_name_deserialization: true
    no_auto_serialize: true
    no_auto_deserialize: true
    properties:
      state:
        type: MeshState
        enum: true
      vertex_count:
        type: uint32_t
      index_count:
        type: uint32_t
      vertices:
        type: Low::Util::List<Low::Util::Resource::Vertex>
      indices:
        type: Low::Util::List<uint32_t>
      transform:
        type: Low::Math::Matrix4x4
      parent_transform:
        type: Low::Math::Matrix4x4
      local_transform:
        type: Low::Math::Matrix4x4
      aabb:
        type: Low::Math::AABB
      bounding_sphere:
        type: Low::Math::Sphere

  MeshResource:
    private_make: true
    skip_name_serialization: true
    skip_name_deserialization: true
    no_auto_serialize: true
    no_auto_deserialize: true
    properties:
      path:
        type: Util::String
        private_setter: true
      mesh_path:
        type: Util::String
        private_setter: true
      sidecar_path:
        type: Util::String
        private_setter: true
      source_file:
        type: Util::String
        private_setter: true
      mesh_id:
        type: u64
        private_setter: true
      asset_hash:
        type: u64
        private_setter: true
    functions:
      make:
        static: true
        return_type: MeshResource
        return_handle: true
        parameters:
          - name: path
            type: Util::String
      make_from_config:
        static: true
        return_type: MeshResource
        return_handle: true
        parameters:
          - name: config
            type: MeshResourceConfig
      find_by_path:
        static: true
        return_type: MeshResource
        return_handle: true
        parameters:
          - name: path
            type: Util::String


  GpuMesh:
    no_auto_serialize: true
    no_auto_deserialize: true
    properties:
      uploaded_submesh_count:
        type: uint32_t
      submesh_count:
        type: uint32_t
      submeshes:
        type: Low::Util::List<GpuSubmesh>
      aabb:
        type: Low::Math::AABB
      bounding_sphere:
        type: Low::Math::Sphere

  GpuSubmesh:
    skip_name_serialization: true
    skip_name_deserialization: true
    no_auto_serialize: true
    no_auto_deserialize: true
    properties:
      state:
        type: MeshState
        enum: true
      uploaded_vertex_count:
        type: uint32_t
      uploaded_index_count:
        type: uint32_t
      vertex_count:
        type: uint32_t
      index_count:
        type: uint32_t
      vertex_start:
        type: uint32_t
      index_start:
        type: uint32_t
      transform:
        type: Low::Math::Matrix4x4
      parent_transform:
        type: Low::Math::Matrix4x4
      local_transform:
        type: Low::Math::Matrix4x4
      aabb:
        type: Low::Math::AABB
      bounding_sphere:
        type: Low::Math::Sphere

  TextureResource:
    private_make: true
    skip_name_serialization: true
    skip_name_deserialization: true
    no_auto_serialize: true
    no_auto_deserialize: true
    properties:
      path:
        type: Util::String
        private_setter: true
      texture_path:
        type: Util::String
        private_setter: true
      sidecar_path:
        type: Util::String
        private_setter: true
      source_file:
        type: Util::String
        private_setter: true
      texture_id:
        type: u64
        private_setter: true
      asset_hash:
        type: u64
        private_setter: true
    functions:
      make:
        static: true
        return_type: TextureResource
        return_handle: true
        parameters:
          - name: path
            type: Util::String
      make_from_config:
        static: true
        return_type: TextureResource
        return_handle: true
        parameters:
          - name: config
            type: TextureResourceConfig
      find_by_path:
        static: true
        return_type: TextureResource
        return_handle: true
        parameters:
          - name: path
            type: Util::String

  Texture:
    reference_counted: true
    unique_id: true
    properties:
      gpu:
        type: GpuTexture
        handle: true
      resource:
        type: TextureResource
        handle: true
      staging:
        type: TextureStaging
        handle: true
      state:
        type: Low::Renderer::TextureState
        enum: true
    functions:
      make_gpu_ready:
        static: true
        return_type: Low::Renderer::Texture
        return_handle: true
        parameters:
          - name: name
            type: Low::Util::Name
      get_editor_image:
        return_type: EditorImage
        return_handle: true
      make_from_resource_config:
        static: true
        return_type: Texture
        return_handle: true
        parameters:
          - name: config
            type: TextureResourceConfig

  TextureStaging:
    properties:
      mip0:
        type: Low::Renderer::TexturePixels
        handle: true
      mip1:
        type: Low::Renderer::TexturePixels
        handle: true
      mip2:
        type: Low::Renderer::TexturePixels
        handle: true
      mip3:
        type: Low::Renderer::TexturePixels
        handle: true
    functions:
      get_pixels_for_miplevel:
        return_type: Low::Renderer::TexturePixels
        return_handle: true
        parameters:
          - name: mipLevel
            type: uint8_t

  TexturePixels:
    properties:
      dimensions:
        type: Low::Math::UVector2
      channels:
        type: uint8_t
      format:
        type: Low::Util::Resource::Image2DFormat
      pixel_data:
        type: Low::Util::List<uint8_t>
      data_size:
        type: uint64_t
      state:
        type: Low::Renderer::TextureState
        enum: true

  GpuTexture:
    dynamic_increase: false
    properties:
      data_handle:
        type: uint64_t
      texture_handle:
        type: uint64_t
      imgui_texture_id:
        type: ImTextureID
        no_ref: true
      full_mip_count:
        type: uint8_t
      loaded_mips:
        type: Low::Util::List<uint8_t>
        getter_name: loaded_mips
        private_setter: true

  Font:
    reference_counted: true
    unique_id: true
    properties:
      texture:
        type: Low::Renderer::Texture
        handle: true
      resource:
        type: Low::Renderer::FontResource
        handle: true
      glyphs:
        type: Low::Util::UnorderedMap<char, Glyph>
      sidecar_loaded:
        type: bool
    functions:
      is_fully_loaded:
        return_type: bool
      make_from_resource_config:
        static: true
        return_type: Font
        return_handle: true
        parameters:
          - name: config
            type: FontResourceConfig
      get_editor_image:
        return_type: EditorImage
        return_handle: true
  FontResource:
    private_make: true
    skip_name_serialization: true
    skip_name_deserialization: true
    no_auto_serialize: true
    no_auto_deserialize: true
    properties:
      path:
        type: Util::String
        private_setter: true
      font_path:
        type: Util::String
        private_setter: true
      sidecar_path:
        type: Util::String
        private_setter: true
      source_file:
        type: Util::String
        private_setter: true
      font_id:
        type: u64
        private_setter: true
      asset_hash:
        type: u64
        private_setter: true
    functions:
      make:
        static: true
        return_type: FontResource
        return_handle: true
        parameters:
          - name: path
            type: Util::String
      make_from_config:
        static: true
        return_type: FontResource
        return_handle: true
        parameters:
          - name: config
            type: FontResourceConfig

  EditorImage:
    properties:
      path: 
        type: Low::Util::String
      gpu:
        type: Low::Renderer::EditorImageGpu
        handle: true
      staging:
        type: Low::Renderer::EditorImageStaging
        handle: true
      state:
        type: Low::Renderer::TextureState
        enum: true

  EditorImageStaging:
    properties:
      dimensions:
        type: Low::Math::UVector2
      channels:
        type: uint8_t
      format:
        type: Low::Util::Resource::Image2DFormat
        no_ref: true
      pixel_data:
        type: Low::Util::List<uint8_t>
      data_size:
        type: uint64_t

  EditorImageGpu:
    dynamic_increase: false
    properties:
      imgui_texture_initialized:
        type: bool
      data_handle:
        type: uint64_t
      editor_image_handle:
        type: uint64_t
      imgui_texture_id:
        type: ImTextureID
        no_ref: true

  Material:
    private_make: true
    unique_id: true
    reference_counted: true
    dirty_flags:
      dirty:
        no_data: true
    header_imports:
      - LowRendererMaterialType.h
      - LowRendererMaterialState.h
    properties:
      state:
        type: MaterialState
        enum: true
        skip_serialization: true
        skip_deserialization: true
      material_type:
        type: MaterialType
        handle: true
        private_setter: true
        skip_serialization: true
        skip_deserialization: true
      resource:
        type: Low::Renderer::MaterialResource
        handle: true
        skip_serialization: true
        skip_deserialization: true
      gpu:
        type: Low::Renderer::GpuMaterial
        handle: true
        skip_serialization: true
        skip_deserialization: true
      properties:
        type: Low::Util::Map<Low::Util::Name, Low::Util::Variant>
        no_setter: true
        skip_serialization: true
        skip_deserialization: true
    functions:
      make:
        return_type: Material
        return_handle: true
        static: true
        parameters:
          - name: name
            type: Low::Util::Name
          - name: materialType
            type: Low::Renderer::MaterialType
            handle: true
      make_gpu_ready:
        return_type: Material
        return_handle: true
        static: true
        parameters:
          - name: name
            type: Low::Util::Name
          - name: materialType
            type: Low::Renderer::MaterialType
            handle: true
      update_gpu:
        return_type: void
      set_property_vector4:
        return_type: void
        parameters:
          - name: name
            type: Util::Name
          - name: value
            type: Math::Vector4
      set_property_vector3:
        return_type: void
        parameters:
          - name: name
            type: Util::Name
          - name: value
            type: Math::Vector3
      set_property_vector2:
        return_type: void
        parameters:
          - name: name
            type: Util::Name
          - name: value
            type: Math::Vector2
      set_property_float:
        return_type: void
        parameters:
          - name: name
            type: Util::Name
          - name: value
            type: float
      set_property_u32:
        return_type: void
        parameters:
          - name: name
            type: Util::Name
          - name: value
            type: uint32_t
      set_property_texture:
        return_type: void
        parameters:
          - name: name
            type: Util::Name
          - name: value
            type: Low::Renderer::Texture
            handle: true
      get_property_vector4:
        return_type: Low::Math::Vector4
        constant: true
        parameters:
          - name: name
            type: Util::Name
      get_property_vector3:
        return_type: Low::Math::Vector3
        constant: true
        parameters:
          - name: name
            type: Util::Name
      get_property_vector2:
        return_type: Low::Math::Vector2
        constant: true
        parameters:
          - name: name
            type: Util::Name
      get_property_float:
        return_type: float
        constant: true
        parameters:
          - name: name
            type: Util::Name
      get_property_u32:
        return_type: uint32_t
        constant: true
        parameters:
          - name: name
            type: Util::Name
      get_property_texture:
        return_type: Low::Renderer::Texture
        return_handle: true
        constant: true
        parameters:
          - name: name
            type: Util::Name

  MaterialResource:
    private_make: true
    properties:
      path:
        type: Util::String
        private_setter: true
    functions:
      make:
        static: true
        return_type: MaterialResource
        return_handle: true
        parameters:
          - name: path
            type: Util::String
      find_by_path:
        static: true
        return_type: MaterialResource
        return_handle: true
        parameters:
          - name: path
            type: Util::String

  GpuMaterial:
    dynamic_increase: false
    no_auto_serialize: true
    no_auto_deserialize: true
    dirty_flags:
      - dirty
    properties:
      material_handle:
        type: u64
      data:
        type: Util::List<uint8_t>
        private_getter: true
        no_setter: true
        getter_name: data
        skip_serialization: true
        skip_deserialization: true
    functions:
      get_data:
        return_type: void*
        constant: true
        const: true

  Model:
    unique_id: true
    properties:
      resource:
        type: Low::Renderer::ModelResource
        handle: true
      lod0:
        type: Low::Renderer::Mesh
        handle: true
        skip_serialization: true
        skip_deserialization: true
      lod1:
        type: Low::Renderer::Mesh
        handle: true
        skip_serialization: true
        skip_deserialization: true
      lod2:
        type: Low::Renderer::Mesh
        handle: true
        skip_serialization: true
        skip_deserialization: true
      lod3:
        type: Low::Renderer::Mesh
        handle: true
        skip_serialization: true
        skip_deserialization: true

  ModelResource:
    private_make: true
    properties:
      path:
        type: Util::String
        private_setter: true
    functions:
      make:
        static: true
        return_type: ModelResource
        return_handle: true
        parameters:
          - name: path
            type: Util::String
      find_by_path:
        static: true
        return_type: ModelResource
        return_handle: true
        parameters:
          - name: path
            type: Util::String
