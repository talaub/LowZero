module: LowRenderer2
source_path: src
header_path: include
prefix: LowRenderer
namespace:
  - Low
  - Renderer
dll_macro: LOW_RENDERER2_API
types:
  DrawCommand:
    skip_name_serialization: true
    skip_name_deserialization: true
    no_auto_serialize: true
    no_auto_deserialize: true
    private_make: true
    properties:
      world_transform:
        type: Low::Math::Matrix4x4
      submesh:
        type: Low::Renderer::GpuSubmesh
        handle: true
        private_setter: true
      slot:
        type: uint32_t
      render_object:
        type: Low::Renderer::RenderObject
        handle: true
        private_setter: true
      material:
        type: Low::Renderer::Material
        handle: true
      uploaded:
        type: bool
      render_scene_handle:
        type: uint64_t
      object_id:
        type: uint32_t
    functions:
      make:
        static: true
        return_type: DrawCommand
        return_handle: true
        parameters:
          - name: renderObject
            type: Low::Renderer::RenderObject
            handle: true
          - name: renderScene
            type: Low::Renderer::RenderScene
            handle: true
          - name: submesh
            type: Low::Renderer::GpuSubmesh
            handle: true
      get_sort_index:
        constant: true
        return_type: uint64_t

  RenderObject:
    skip_name_serialization: true
    skip_name_deserialization: true
    no_auto_serialize: true
    no_auto_deserialize: true
    private_make: true
    properties:
      world_transform:
        type: Low::Math::Matrix4x4
        dirty_flag: dirty
      mesh:
        type: Low::Renderer::Mesh
        handle: true
        private_setter: true
      uploaded:
        type: bool
      slot:
        type: uint32_t
      render_scene_handle:
        type: uint64_t
        private_setter: true
      material:
        type: Low::Renderer::Material
        handle: true
        dirty_flag: dirty
      draw_commands:
        type: Low::Util::List<DrawCommand>
        no_setter: true
      object_id:
        type: uint32_t
        dirty_flag: dirty
    functions:
      make:
        static: true
        return_type: RenderObject
        return_handle: true
        parameters:
          - name: renderScene
            type: RenderScene
            handle: true
          - name: mesh
            type: Low::Renderer::Mesh
            handle: true
  RenderScene:
    skip_name_serialization: true
    skip_name_deserialization: true
    no_auto_serialize: true
    no_auto_deserialize: true
    properties:
      draw_commands:
        type: Low::Util::List<DrawCommand>
        no_setter: true
      pointlight_deleted_slots:
        type: Low::Util::Set<u32>
        private_setter: true
      data_handle:
        type: uint64_t
      directional_light_direction:
        type: Low::Math::Vector3
      directional_light_color:
        type: Low::Math::ColorRGB
      directional_light_intensity:
        type: float
    functions:
      insert_draw_command:
        return_type: bool
        parameters:
          - name: drawCommand
            type: Low::Renderer::DrawCommand
            handle: true
  RenderView:
    skip_name_serialization: true
    skip_name_deserialization: true
    no_auto_serialize: true
    no_auto_deserialize: true
    properties:
      camera_position:
        type: Low::Math::Vector3
        dirty_flag: camera_dirty
      camera_direction:
        type: Low::Math::Vector3
        dirty_flag: camera_dirty
      camera_fov:
        type: float
        dirty_flag: camera_dirty
      render_target_handle:
        type: uint64_t
      view_info_handle:
        type: uint64_t
      dimensions:
        type: Low::Math::UVector2
        setter_name: set_actual_dimensions
      desired_dimensions:
        type: Low::Math::UVector2
        dirty_flag: dimensions_dirty
        setter_name: set_dimensions
      render_scene:
        type: Low::Renderer::RenderScene
        handle: true
      gbuffer_albedo:
        type: Low::Renderer::Texture
        handle: true
      gbuffer_normals:
        type: Low::Renderer::Texture
        handle: true
      gbuffer_depth:
        type: Low::Renderer::Texture
        handle: true
      gbuffer_viewposition:
        type: Low::Renderer::Texture
        handle: true
      object_map:
        type: Low::Renderer::Texture
        handle: true
      lit_image:
        type: Low::Renderer::Texture
        handle: true
      blurred_image:
        type: Low::Renderer::Texture
        handle: true
      steps:
        type: Low::Util::List<Low::Renderer::RenderStep>
        no_setter: true
      step_data:
        type: Low::Util::List<RenderStepDataPtr>
        private_set: true
      ui_canvases:
        type: Low::Util::List<Low::Renderer::UiCanvas>
        no_setter: true
      debug_geometry:
        type: Low::Util::List<Low::Renderer::DebugGeometryDraw>
        no_setter: true
    functions:
      add_step:
        return_type: void
        parameters:
          - name: step
            type: Low::Renderer::RenderStep
            handle: true
      add_step_by_name:
        return_type: void
        parameters:
          - name: stepName
            type: Low::Util::Name
      add_ui_canvas:
        return_type: void
        parameters:
          - name: canvas
            type: Low::Renderer::UiCanvas
            handle: true
      add_debug_geometry:
        return_type: void
        parameters:
          - name: debugGeometryDraw
            type: Low::Renderer::DebugGeometryDraw
        description: Add a new debug geometry draw element to this renderview.
          This element will be rendered for once frame before being cleared again.
      read_object_id_px:
        return_type: uint32_t
        parameters:
          - name: pixelPosition
            type: const Low::Math::UVector2
            no_ref: true
      make_default:
        return_type: Low::Renderer::RenderView
        return_handle: true
        static: true
        parameters:
          - name: name
            type: Low::Util::Name

  MaterialType:
    private_make: true
    properties:
      transparent:
        type: bool
      draw_pipeline_handle:
        type: uint64_t
      depth_pipeline_handle:
        type: uint64_t
      inputs:
        type: Util::List<MaterialTypeInput>
        private_getter: true
        no_setter: true
      initialized:
        type: bool
      draw_pipeline_config:
        type: Low::Renderer::GraphicsPipelineConfig
        no_setter: true
      depth_pipeline_config:
        type: Low::Renderer::GraphicsPipelineConfig
        no_setter: true
      family:
        type: Low::Renderer::MaterialTypeFamily
        enum: true
        private_setter: true
    functions:
      make:
        static: true
        return_type: Low::Renderer::MaterialType
        return_handle: true
        parameters:
          - name: name
            type: Low::Util::Name
          - name: family
            type: Low::Renderer::MaterialTypeFamily
            enum: true
      calculate_offsets:
        return_type: void
        private: true
      get_input:
        return_type: bool
        parameters:
          - name: name
            type: Low::Util::Name
          - name: input
            type: MaterialTypeInput*
      finalize:
        return_type: void
      add_input:
        return_type: void
        parameters:
          - name: name
            type: Low::Util::Name
          - name: type
            type: MaterialTypeInputType
            no_ref: true
      has_input:
        return_type: bool
        parameters:
          - name: name
            type: Low::Util::Name
      get_input_offset:
        return_type: uint32_t
        parameters:
          - name: name
            type: Low::Util::Name
      get_input_type:
        return_type: MaterialTypeInputType
        no_ref: true
        parameters:
          - name: name
            type: Low::Util::Name
      fill_input_names:
        return_type: uint32_t
        parameters:
          - name: inputNames
            type: Low::Util::List<Low::Util::Name>
      set_draw_vertex_shader_path:
        return_type: void
        parameters:
          - name: path
            type: Low::Util::String
            no_ref: true
      set_draw_fragment_shader_path:
        return_type: void
        parameters:
          - name: path
            type: Low::Util::String
            no_ref: true
      set_depth_vertex_shader_path:
        return_type: void
        parameters:
          - name: path
            type: Low::Util::String
            no_ref: true
      set_depth_fragment_shader_path:
        return_type: void
        parameters:
          - name: path
            type: Low::Util::String
            no_ref: true


  RenderStep:
    dynamic_increase: false
    properties:
      setup_callback:
        type: Low::Util::Function<bool(RenderStep)>
        no_ref: true
      prepare_callback:
        type: Low::Util::Function<bool(Low::Renderer::RenderStep, Low::Renderer::RenderView)>
        no_ref: true
      teardown_callback:
        type: Low::Util::Function<bool(Low::Renderer::RenderStep, Low::Renderer::RenderView)>
        no_ref: true
      execute_callback:
        type: Low::Util::Function<bool(Low::Renderer::RenderStep, float, Low::Renderer::RenderView)>
        no_ref: true
      resolution_update_callback:
        type: Low::Util::Function<bool(Low::Renderer::RenderStep, Low::Math::UVector2 p_NewDimensions, Low::Renderer::RenderView)>
        no_ref: true
    functions:
      prepare:
        return_type: bool
        parameters:
          - name: renderView
            type: Low::Renderer::RenderView
            handle: true
      teardown:
        return_type: bool
        parameters:
          - name: renderView
            type: Low::Renderer::RenderView
            handle: true
      update_resolution:
        return_type: bool
        parameters:
          - name: newDimensions
            type: Low::Math::UVector2
          - name: renderView
            type: Low::Renderer::RenderView
            handle: true
      execute:
        return_type: bool
        parameters:
          - name: deltaTime
            type: float
          - name: renderView
            type: Low::Renderer::RenderView
            handle: true
      setup:
        return_type: bool
  PointLight:
    private_make: true
    dirty_flags:
      dirty:
        no_data: true
    properties:
      world_position:
        type: Low::Math::Vector3
        dirty_flag: dirty
      color:
        type: Low::Math::ColorRGB
        dirty_flag: dirty
      intensity:
        type: float
        dirty_flag: dirty
      range:
        type: float
        dirty_flag: dirty
      render_scene_handle:
        type: uint64_t
        private_setter: true
      slot:
        type: uint32_t
    functions:
      make:
        static: true
        return_type: PointLight
        return_handle: true
        parameters:
          - name: renderScene
            type: Low::Renderer::RenderScene
            handle: true
  UiDrawCommand:
    skip_name_serialization: true
    skip_name_deserialization: true
    no_auto_serialize: true
    no_auto_deserialize: true
    private_make: true
    dirty_flags:
      dirty:
        no_data: true
      z_dirty:
        no_data: true
    properties:
      render_object:
        type: Low::Renderer::UiRenderObject
        handle: true
      canvas_handle:
        type: uint64_t
      texture:
        type: Texture
        handle: true
        dirty_flag: dirty
      position:
        type: Low::Math::Vector3
        dirty_flag: dirty
      size:
        type: Low::Math::Vector2
        dirty_flag: dirty
      rotation2D:
        type: float
        dirty_flag: dirty
      color:
        type: Low::Math::Color
        dirty_flag: dirty
      uv_rect:
        type: Low::Math::Vector4
        dirty_flag: dirty
      material:
        type: Material
        handle: true
        dirty_flag: dirty
      z_sorting:
        type: uint32_t
        dirty_flag:
          - dirty
          - z_dirty
      submesh:
        type: Low::Renderer::GpuSubmesh
        handle: true
        private_setter: true
    functions:
      make:
        static: true
        return_type: UiDrawCommand
        return_handle: true
        parameters:
          - name: renderObject
            type: Low::Renderer::UiRenderObject
            handle: true
          - name: canvas
            type: Low::Renderer::UiCanvas
            handle: true
          - name: submesh
            type: Low::Renderer::GpuSubmesh
            handle: true
  UiRenderObject:
    skip_name_serialization: true
    skip_name_deserialization: true
    no_auto_serialize: true
    no_auto_deserialize: true
    private_make: true
    dirty_flags:
      z_dirty:
        no_data: true
      dirty:
        no_data: true
    properties:
      canvas_handle:
        type: uint64_t
        private_setter: true
      texture:
        type: Texture
        handle: true
        dirty_flag: dirty
      position:
        type: Low::Math::Vector3
        dirty_flag: dirty
      size:
        type: Low::Math::Vector2
        dirty_flag: dirty
      rotation2D:
        type: float
        dirty_flag: dirty
      color:
        type: Low::Math::Color
        dirty_flag: dirty
      uv_rect:
        type: Low::Math::Vector4
        dirty_flag: dirty
      material:
        type: Material
        handle: true
        dirty_flag: dirty
      z_sorting:
        type: uint32_t
        dirty_flag:
          - dirty
          - z_dirty
      mesh:
        type: Low::Renderer::Mesh
        handle: true
        private_setter: true
      draw_commands:
        type: Low::Util::List<UiDrawCommand>
        no_setter: true
    functions:
      make:
        static: true
        return_type: UiRenderObject
        return_handle: true
        parameters:
          - name: canvas
            type: UiCanvas
            handle: true
          - name: mesh
            type: Low::Renderer::Mesh
            handle: true

  UiCanvas:
    properties:
      z_sorting:
        type: uint32_t
        dirty_flag: z_dirty
      draw_commands:
        type: Low::Util::List<UiDrawCommand>
        no_setter: true
      
  TextureExport:
    properties:
      path:
        type: Low::Util::String
      texture:
        type: Low::Renderer::Texture
        handle: true
      state:
        type: Low::Renderer::TextureExportState
        no_ref: true
      finish_callback:
        type: Low::Util::Function<bool(Low::Renderer::TextureExport)>
        no_ref: true
      data_handle:
        type: uint64_t
    functions:
      finish:
        return_type: bool

  AdaptiveRenderObject:
    private_make: true
    properties:
      model:
        type: Low::Renderer::Model
        handle: true
        private_setter: true
      world_transform:
        type: Low::Math::Matrix4x4
        dirty_flag: dirty
      render_scene_handle:
        type: uint64_t
        private_setter: true
      material:
        type: Low::Renderer::Material
        handle: true
        dirty_flag: dirty
      object_id:
        type: uint32_t
        dirty_flag: dirty
    functions:
      make:
        return_type: AdaptiveRenderObject
        return_handle: true
        static: true
        parameters:
          - name: scene
            type: Low::Renderer::RenderScene
            handle: true
          - name: model
            type: Low::Renderer::Model
            handle: true
